<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>흑돼지맵</title>
</head>
<body>
<div id="map" style="width:100vw;height:100vh;"></div>
<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=dbbe2da30ca80968723394ba0f93d23b"></script>
<script th:inline="javascript">
  var mapContainer = document.getElementById('map');
  mapOption = {
    center: new kakao.maps.LatLng(37.4981646510326, 127.028307900881),
    level: 5
  };
  var map = new kakao.maps.Map(mapContainer, mapOption);
  /*<![CDATA[*/
  const boardList = [[${boards}]];
  console.log(boardList);
  /*]]>*/
  var positions = [
    {
      content: '<div>'+boardList[0].title+'</div>',
      latlng: new kakao.maps.LatLng(37.5060373, 127.0253441)
    },
    {
      content: '<div>'+boardList[1].title+'</div>',
      latlng: new kakao.maps.LatLng(37.5061068, 127.0492459)
    },
    {
      content: '<div>'+boardList[2].title+'</div>',
      latlng: new kakao.maps.LatLng(37.5519471, 126.9210969)
    },
  ];
// hello
  var imageSrc = "https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/markerStar.png";

  for (var i = 0; i < positions.length; i ++) {
    var imageSize = new kakao.maps.Size(24, 35);
    var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize);

    // 마커를 생성
    var marker = new kakao.maps.Marker({
      map: map, // 마커를 표시할 지도
      position: positions[i].latlng, // 마커의 위치
      image : markerImage // 마커 이미지
    });

    // 마커에 표시할 인포윈도우를 생성
    var infowindow = new kakao.maps.InfoWindow({
      content: positions[i].content // 인포윈도우에 표시할 내용
    });

    kakao.maps.event.addListener(marker, 'mouseover', makeOverListener(map, marker, infowindow));
    kakao.maps.event.addListener(marker, 'click', makeClickListener());
    kakao.maps.event.addListener(marker, 'mouseout', makeOutListener(infowindow));
  }

  function makeOverListener(map, marker, infowindow) {
    return function() {
      infowindow.open(map, marker);
    };
  }

  function getBoard(id) {
    //POST /api/boards/{id}
    $.ajax({
      url: '/api/boards/' + id,
      type: 'GET',
      success: function(result) {
        console.log('result',result);
        //window.location.href = '/board/list';
      }
    });
  }

  function makeClickListener() {
    return function() {
      window.location.href = '/board/information';
    };
  }



  function makeOutListener(infowindow) {
    return function() {
      infowindow.close();
    };
  }
</script>
</body>
</html>